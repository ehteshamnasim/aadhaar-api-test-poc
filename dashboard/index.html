<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test Automation - Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1>API Test Automation</h1>
                    <p>Real-time test generation, execution, and code coverage analysis</p>
                </div>
                <div class="header-right">
                    <div class="status-indicator">
                        <span class="status-dot"></span>
                        <span id="status">Initializing...</span>
                    </div>
                    <span id="timestamp" class="timestamp">-</span>
                    <button id="reset-btn" class="reset-button" onclick="resetDashboard()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                        </svg>
                        Reset
                    </button>
                </div>
            </div>
        </header>

        <div class="main-layout">
            <!-- Left Side: Metrics Grid -->
            <div class="left-panel">
                <div class="metrics-grid">
                    <!-- API Specification -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>API Specification</h3>
                            <span id="parse-status" class="status-badge">Pending</span>
                        </div>
                        <div class="metric-body">
                            <div class="metric-row">
                                <span class="metric-label">File</span>
                                <span id="spec-file" class="metric-value">-</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Endpoints</span>
                                <span id="endpoint-count" class="metric-value accent">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Test Generation -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Test Generation</h3>
                            <span id="gen-status" class="status-badge">Pending</span>
                        </div>
                        <div class="metric-body">
                            <div class="progress-container">
                                <div id="gen-progress" class="progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Generated</span>
                                <span id="tests-generated" class="metric-value accent">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Code Validation -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Code Validation</h3>
                            <span id="validation-status" class="status-badge">Pending</span>
                        </div>
                        <div class="metric-body">
                            <div class="validation-checks">
                                <div class="check-item">
                                    <span>Syntax</span>
                                    <span id="syntax-check" class="check-status">-</span>
                                </div>
                                <div class="check-item">
                                    <span>Imports</span>
                                    <span id="import-check" class="check-status">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Test Execution -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Test Execution</h3>
                            <div class="test-stats">
                                <span class="test-stat success"><span id="tests-passed">0</span> ✓</span>
                                <span class="test-stat error"><span id="tests-failed">0</span> ✗</span>
                            </div>
                        </div>
                        <div class="metric-body">
                            <div class="metric-row">
                                <span class="metric-label">Total Tests</span>
                                <span id="tests-total" class="metric-value">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contract Testing -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Contract Testing</h3>
                        </div>
                        <div class="metric-body">
                            <div class="metric-stats-row">
                                <div class="stat-item">
                                    <span class="stat-number" id="contracts-tested">0</span>
                                    <span class="stat-label">Tested</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number success" id="contracts-passed">0</span>
                                    <span class="stat-label">Passed</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number error" id="contracts-failed">0</span>
                                    <span class="stat-label">Failed</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Code Coverage -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Code Coverage</h3>
                        </div>
                        <div class="metric-body">
                            <div class="coverage-visual">
                                <svg width="80" height="80" class="coverage-ring">
                                    <circle cx="40" cy="40" r="35" fill="none" stroke="#f5f5f5" stroke-width="8"/>
                                    <circle id="coverage-circle" cx="40" cy="40" r="35" fill="none" 
                                            stroke="#f44d30" stroke-width="8" 
                                            stroke-dasharray="220" stroke-dashoffset="220"
                                            transform="rotate(-90 40 40)"/>
                                </svg>
                                <div class="coverage-text" id="coverage-text">0%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Version Control -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Version Control</h3>
                        </div>
                        <div class="metric-body">
                            <div class="vc-status">
                                <div class="vc-item">
                                    <span>Repository</span>
                                    <span id="git-repo" class="vc-value">-</span>
                                </div>
                                <div class="vc-item">
                                    <span>Commit</span>
                                    <span id="git-commit" class="vc-badge">Pending</span>
                                </div>
                                <div class="vc-item">
                                    <span>Push</span>
                                    <span id="git-push" class="vc-badge">Pending</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CI/CD Pipeline -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>CI/CD Pipeline</h3>
                            <span id="cicd-status" class="status-badge">Not Started</span>
                        </div>
                        <div class="metric-body">
                            <div class="metric-row">
                                <span class="metric-label">Build</span>
                                <span id="build-status" class="metric-value">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <a href="/coverage-report" target="_blank" id="coverage-btn" class="btn btn-primary" style="display: none;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                        Coverage Report
                    </a>
                    <a href="/generated-tests" id="tests-btn" class="btn btn-secondary" style="display: none;" target="_blank">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                        View Tests
                    </a>
                </div>

                <!-- Comparison Section -->
                <div id="comparison-section" class="comparison-section" style="display: none;">
                    <div class="section-header">
                        <h3>Manual vs AI Automation</h3>
                    </div>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <div class="comparison-title">Manual Approach</div>
                            <div class="comparison-metric">
                                <span>Effort</span>
                                <span id="before-effort" class="comparison-value">-</span>
                            </div>
                            <div class="comparison-metric">
                                <span>Test Cases</span>
                                <span id="before-tests" class="comparison-value">-</span>
                            </div>
                            <div class="comparison-metric">
                                <span>Coverage</span>
                                <span id="before-coverage" class="comparison-value">-</span>
                            </div>
                        </div>
                        <div class="comparison-card highlight">
                            <div class="comparison-title">AI Automation</div>
                            <div class="comparison-metric">
                                <span>Time</span>
                                <span id="after-time" class="comparison-value accent">-</span>
                            </div>
                            <div class="comparison-metric">
                                <span>Test Cases</span>
                                <span id="after-tests" class="comparison-value accent">-</span>
                            </div>
                            <div class="comparison-metric">
                                <span>Lines of Code</span>
                                <span id="after-lines" class="comparison-value accent">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Side: Activity & Results -->
            <div class="right-panel">
                <!-- Test Results Panel -->
                <div class="panel test-results-panel">
                    <div class="panel-header">
                        <h3>Test Results</h3>
                        <span class="panel-badge">Real-time</span>
                    </div>
                    <div class="panel-body">
                        <div id="test-details-list" class="test-results-list">
                            <div class="empty-state">
                                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="2">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                    <polyline points="22 4 12 14.01 9 11.01"/>
                                </svg>
                                <p>No test results yet</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activity Log Panel -->
                <div class="panel activity-log-panel">
                    <div class="panel-header">
                        <h3>Activity Log</h3>
                        <span class="panel-badge">Live</span>
                    </div>
                    <div class="panel-body">
                        <div id="log" class="activity-log-list">
                            <!-- Logs will be added here dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>